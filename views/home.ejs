<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" type="image/png" href="https://animaproject.s3.amazonaws.com/home/favicon.png" />
    <meta name="og:type" content="website" />
    <meta name="twitter:card" content="photo" />
    <link rel="stylesheet" type="text/css" href="css/home.css" />
    <link rel="stylesheet" type="text/css" href="css/styleguide.css" />
    <link rel="stylesheet" type="text/css" href="css/globals.css" />
    <link rel="stylesheet" type="text/css" href="css/fragile-comple.css" />
    <link rel="stylesheet" type="text/css" href="css/hazard-comple.css" />
    <link rel="stylesheet" type="text/css" href="css/general-complete.css" />
</head>
<body style="margin: 0; background: #ffffff">
    <input type="hidden" id="anPageName" name="page" value="home" />
    <div class="container-center-horizontal">
        <div class="home screen">
            <div class="bg-elems-xl4bh6">
                <div class="bg-elements-b2ulYz">
                    <div class="group-374-xE0Mep">
                        <img class="path-462-oQfiJA" src="img/path-462@1x.png" alt="Path 462" />
                        <img class="path-463-oQfiJA" src="img/path-463@1x.png" alt="Path 463" />
                        <img class="person-oQfiJA" src="img/person-10@1x.png" alt="Person" />
                    </div>
                    <img class="arrow-xE0Mep" src="img/arrow-1@1x.png" alt="Arrow" />
                    <div class="main-header-xE0Mep"></div>
                </div>
                <div class="logo-b2ulYz">
                    <div class="m-5Lf67E">
                        <img class="path-469-I7EJXq" src="img/path-370@1x.png" alt="Path 469" />
                    </div>
                    <div class="v-5Lf67E">
                        <img class="path-470-p1FER0" src="img/path-456@1x.png" alt="Path 470" />
                    </div>
                    <div class="e-5Lf67E">
                        <img class="path-471-bnzQAx" src="img/path-457@1x.png" alt="Path 471" />
                    </div>
                    <div class="group-264-5Lf67E">
                        <img class="rectangle-81-4Escn6" src="img/rectangle-11@1x.png" alt="Rectangle 81" />
                    </div>
                    <div class="group-265-5Lf67E">
                        <img class="path-472-U17kh0" src="img/path-297@1x.png" alt="Path 472" />
                        <img class="path-473-U17kh0" src="img/path-110@1x.png" alt="Path 473" />
                        <img class="path-474-U17kh0" src="img/path-111@1x.png" alt="Path 474" />
                    </div>
                    <div class="pin-5Lf67E">
                        <img class="path-475-hv4NV3" src="img/path-376@1x.png" alt="Path 475" />
                        <div class="ellipse-24-hv4NV3"></div>
                    </div>
                    <div class="box-5Lf67E">
                        <img class="rectangle-82-iG4p4b" src="img/rectangle-12@1x.png" alt="Rectangle 82" />
                    </div>
                </div>
            </div>
            <!-- New Label Button -->
            <a href="/new-lable">
                <div class="new-lable-button-xl4bh6 smart-layers-pointers">
                    <div class="group-375-PelNm4 smart-layers-pointers">
                        <div class="green-button-new-lable-vUdHvx"></div>
                        <div class="x-vUdHvx smart-layers-pointers">
                            <img class="path-464-5p9wUQ" src="img/path-464-11-1x-png@1x.png" alt="Path 464" />
                            <img class="path-465-5p9wUQ" src="img/path-465-10-1x-png@1x.png" alt="Path 465" />
                        </div>
                        <h1 class="title-vUdHvx lato-normal-white-39-8px">New lable</h1>
                    </div>
                </div>
            </a>
    
            <!-- Search Bar -->
            <a href="/search">
                <div class="search-bar-xl4bh6 smart-layers-pointers">
                    <a href="/search" onclick="window.event.stopPropagation()">
                        <div class="search-box-LvIzbA"></div>
                    </a>
                    <img class="search-icon-LvIzbA smart-layers-pointers" src="img/search-icon-11-1x-png-1x-png@1x.png" alt="search icon" />
                    <input
                        class="seach-for-a-specific-lable-LvIzbA lato-black-white-30px"
                        name="seach-for-a-specific-lable-223"
                        placeholder="Seach for a specific lable ..."
                        type="text"
                        required
                    />
                </div>
            </a>
        </div>
    </div>
            
    <!-- Labels Section -->
    <div class="cards">
        <% labels.forEach(function(label) { %>
                <% if (label.category_id === 3) { %>
                <%- include('general-complete', { label: { label_id: label.label_id, label_name: label.label_name, qr_data: label.qr_code_data, category_id: label.category_id } }) %>
            <% } else if (label.category_id === 2) { %>
                <%- include('hazard-comple', { label: { label_id: label.label_id, label_name: label.label_name, qr_data: label.qr_code_data, category_id: label.category_id } }) %>
            <% } else if (label.category_id === 1) { %>
                <%- include('fragile-comple', { label: { label_id: label.label_id, label_name: label.label_name, qr_data: label.qr_code_data, category_id: label.category_id } }) %>
            <% } %>
        <% }); %>
    </div>

    <!-- profile and sign out options -->
    <div class="popup-container">
        <label class="popup">
            <input type="checkbox" />
            <div tabindex="0" class="burger">
                <svg
                viewBox="0 0 24 24"
                fill="white"
                height="20"
                width="20"
                xmlns="http://www.w3.org/2000/svg"
                >
                <path
                    d="M12 2c2.757 0 5 2.243 5 5.001 0 2.756-2.243 5-5 5s-5-2.244-5-5c0-2.758 2.243-5.001 5-5.001zm0-2c-3.866 0-7 3.134-7 7.001 0 3.865 3.134 7 7 7s7-3.135 7-7c0-3.867-3.134-7.001-7-7.001zm6.369 13.353c-.497.498-1.057.931-1.658 1.302 2.872 1.874 4.378 5.083 4.972 7.346h-19.387c.572-2.29 2.058-5.503 4.973-7.358-.603-.374-1.162-.811-1.658-1.312-4.258 3.072-5.611 8.506-5.611 10.669h24c0-2.142-1.44-7.557-5.631-10.647z"
                ></path>
                </svg>
            </div>
            <nav class="popup-window">
                <legend><%= userName %></legend>
                <ul>
                <li>
                    <!-- Link to deactivate -->
                        <button>
                        <svg
                            width="14"
                            height="14"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="1.2"
                            stroke-linecap="round"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                            d="M19 4v6.406l-3.753 3.741-6.463-6.462 3.7-3.685h6.516zm2-2h-12.388l1.497 1.5-4.171 4.167 9.291 9.291 4.161-4.193 1.61 1.623v-12.388zm-5 4c.552 0 1 .449 1 1s-.448 1-1 1-1-.449-1-1 .448-1 1-1zm0-1c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm6.708.292l-.708.708v3.097l2-2.065-1.292-1.74zm-12.675 9.294l-1.414 1.414h-2.619v2h-2v2h-2v-2.17l5.636-5.626-1.417-1.407-6.219 6.203v5h6v-2h2v-2h2l1.729-1.729-1.696-1.685z"
                            ></path>
                        </svg>
                        <span>Deactivate account</span>
                        </button>
                </li>
                <li>
                    <!-- Link to logout -->
                    <a href="/logout" style="text-decoration: none; color: inherit;">
                        <button>
                        <svg
                            width="14"
                            height="14"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="1"
                            stroke-linecap="round"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path
                            d="M2.598 9h-1.055c1.482-4.638 5.83-8 10.957-8 6.347 0 11.5 5.153 11.5 11.5s-5.153 11.5-11.5 11.5c-5.127 0-9.475-3.362-10.957-8h1.055c1.443 4.076 5.334 7 9.902 7 5.795 0 10.5-4.705 10.5-10.5s-4.705-10.5-10.5-10.5c-4.568 0-8.459 2.923-9.902 7zm12.228 3l-4.604-3.747.666-.753 6.112 5-6.101 5-.679-.737 4.608-3.763h-14.828v-1h14.826z"
                            ></path>
                        </svg>
                        <span>Logout</span>
                        </button>
                    </a>
                </li>
                </ul>
            </nav>
            </label>
        </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <script src="../src/helpers/printLable.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
          // Attach event listeners to print buttons
          document.querySelectorAll('.print-button').forEach(button => {
              button.addEventListener('click', function () {
                  const labelId = this.getAttribute('data-label-id');
                  const categoryId = this.getAttribute('data-category-id');
    
                  console.log('Label ID:', labelId);
                  console.log('Category ID:', categoryId);
    
                  // Fetch the image from the server
                  fetch(`/generate-image?labelId=${labelId}&category_id=${categoryId}`)
                      .then(response => response.blob())
                      .then(blob => {
                          // Use FileSaver.js to prompt for the download
                          saveAs(blob, `label-${labelId}.png`);
                      })
                      .catch(error => console.error('Error downloading image:', error));
              });
          });
      });
    </script>
</body>
</html>